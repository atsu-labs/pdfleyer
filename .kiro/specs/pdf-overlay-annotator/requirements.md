# Requirements Document

## Project Description (Input)
PDFファイルを読み込み、その上に重ねたレイヤーに図形・文字等を書き込んで編集できる Web アプリを作成する。

## 概要サマリ
- PDF の読み込み・表示
- オーバーレイ上での描画（図形、フリーハンド、テキスト）と編集
- 注釈（アノテーション）の保存・エクスポート／共有
- パフォーマンス、アクセシビリティ、セキュリティ

## 要件（EARS フォーマット、対象主体: PDFオーバーレイサービス）

### 要件領域 1: PDF 読込と表示
**目的:** ユーザーが任意の PDF を Web 上で読み込み、正しく表示できる

#### 受入基準
1. WHEN ユーザーが有効な PDF ファイルをアップロードまたは指定したとき THEN PDFオーバーレイサービス SHALL 表示領域に PDF の最初のページを読み込んでレンダリングする
2. IF PDF が複数ページ THEN PDFオーバーレイサービス SHALL ページ切替 UI を提供し、任意ページを表示できる
3. WHEN レンダリングに失敗したとき THEN PDFオーバーレイサービス SHALL ユーザーにエラーメッセージを表示する

### 要件領域 2: オーバーレイ上の描画・編集機能
**目的:** PDF 表示の上に重ねたレイヤーで図形・文字を作成・編集できる

#### 受入基準
1. WHEN ユーザーが描画ツール（矩形、円、線、フリーハンド、テキスト）を選択したとき THEN PDFオーバーレイサービス SHALL 選択したツールでオーバーレイ上に描画できる
2. WHEN 描画を完了したとき THEN PDFオーバーレイサービス SHALL 作成した図形を選択・移動・サイズ変更・削除できる
3. WHEN ユーザーがテキストを追加したとき THEN PDFオーバーレイサービス SHALL 文字内容・フォントサイズ・色を編集できる
4. WHILE ユーザーが編集モードにある THE PDFオーバーレイサービス SHALL 操作の取り消し（Undo）とやり直し（Redo）をサポートする

### 要件領域 3: 注釈の保存・復元・エクスポート
**目的:** 作成したオーバーレイ注釈を持続化・共有できる

#### 受入基準
1. WHEN ユーザーが「保存」を実行したとき THEN PDFオーバーレイサービス SHALL 注釈データをサーバーまたはローカルに保存できる
2. WHEN ユーザーが保存済みファイルを開いたとき THEN PDFオーバーレイサービス SHALL 元の注釈を同じ位置・プロパティで復元する
3. WHEN ユーザーがエクスポートを要求したとき THEN PDFオーバーレイサービス SHALL 注釈を埋め込んだ PDF（フラット化された注釈）または独自の注釈フォーマット（JSON）で出力できる

### 要件領域 4: パフォーマンスと UX
**目的:** 大きな PDF や多数の注釈でも快適に操作できる

#### 受入基準
1. WHEN ページに 100 件未満の図形が存在する場合 THEN PDFオーバーレイサービス SHALL 主要ブラウザ上でインタラクションの遅延が 200ms 未満であることを目標とする（定量的検証はテストで実施）
2. WHERE ユーザーがモバイル端末上で操作している THE PDFオーバーレイサービス SHALL タッチ操作に最適化された入力領域とジェスチャーを提供する

### 要件領域 5: セキュリティと権限
**目的:** ユーザーデータを保護し、アクセスを制御する

#### 受入基準
1. WHEN ユーザーがサーバーに注釈を保存または取得するとき THEN PDFオーバーレイサービス SHALL HTTPS を使用して通信を保護する
2. IF プロジェクトに共有機能がある THEN PDFオーバーレイサービス SHALL アクセス権限（閲覧/編集）を設定できる

## 備考
- ここでは WHAT（振る舞い）に集中し、実装技術（例: canvas vs SVG, ライブラリ名）は含めていません。
- `.kiro/steering/` が見つからなかったため、製品/技術制約は取り込めていません（後続で追加可能）

<!-- end of generated requirements -->
